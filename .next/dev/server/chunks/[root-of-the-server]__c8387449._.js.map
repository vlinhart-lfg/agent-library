{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/v.linhart/Desktop/agent-library-2/agent-library/app/api/proxy-image/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\n\nexport async function GET(request: Request) {\n    const { searchParams } = new URL(request.url);\n    const imageUrl = searchParams.get('url');\n\n    if (!imageUrl) {\n        return NextResponse.json({ error: 'Missing url parameter' }, { status: 400 });\n    }\n\n    try {\n        const response = await fetch(imageUrl, {\n            headers: {\n                // Mimic a browser request or omit referrer to bypass hotlinking protection\n                'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n                'Referer': 'https://www.make.com/',\n            },\n        });\n\n        if (!response.ok) {\n            return NextResponse.json({ error: 'Failed to fetch image' }, { status: response.status });\n        }\n\n        const contentType = response.headers.get('content-type') || 'image/png';\n        const buffer = await response.arrayBuffer();\n\n        return new NextResponse(buffer, {\n            headers: {\n                'Content-Type': contentType,\n                'Cache-Control': 'public, max-age=3600',\n            },\n        });\n    } catch (error) {\n        console.error('Proxy error:', error);\n        return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,OAAgB;IACtC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,IAAI,CAAC,UAAU;QACX,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;IAEA,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,UAAU;YACnC,SAAS;gBACL,2EAA2E;gBAC3E,cAAc;gBACd,WAAW;YACf;QACJ;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAC3F;QAEA,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC,mBAAmB;QAC5D,MAAM,SAAS,MAAM,SAAS,WAAW;QAEzC,OAAO,IAAI,gJAAY,CAAC,QAAQ;YAC5B,SAAS;gBACL,gBAAgB;gBAChB,iBAAiB;YACrB;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}